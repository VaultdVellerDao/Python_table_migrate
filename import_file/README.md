# üåú –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç Python-—Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

1. üåÜ **–†–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** (–ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
2. üìÇ **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏–∑ DDL** (–µ—Å–ª–∏ –µ—Å—Ç—å `tables_ddl.txt` –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–≥–ª–∞—Å–µ–Ω).
3. üåä **–ó–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV** –≤ —Ç–∞–±–ª–∏—Ü—ã PostgreSQL.
4. üóí **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –∫–æ–ª–æ–Ω–∫–∞–º** (–µ—Å–ª–∏ –µ—Å—Ç—å `column_comments.txt`).
5. üîí **–í—ã–¥–∞—á—É –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º** –Ω–∞ —Å—Ö–µ–º—É –∏ —Ç–∞–±–ª–∏—Ü—ã.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```plaintext
result/
‚îÇ‚îÄ‚îÄ <–Ω–∞–∑–≤–∞–Ω–∏–µ_—Å—Ö–µ–º—ã>/
‚îÇ   ‚îú‚îÄ‚îÄ tables_ddl.txt  # DDL-—Ñ–∞–π–ª —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ç–∞–±–ª–∏—Ü (–µ—Å–ª–∏ –µ—Å—Ç—å, —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã)
‚îÇ   ‚îú‚îÄ‚îÄ column_comments.txt  # –§–∞–π–ª —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∫ –∫–æ–ª–æ–Ω–∫–∞–º (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ <–Ω–∞–∑–≤–∞–Ω–∏–µ_—Ç–∞–±–ª–∏—Ü—ã>.csv  # CSV-—Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
```

## üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `config.cfg`

```ini
[database]
schemas = <SCHEMAS>
host = <DATABASE_HOST>
db = <DATABASE_NAME>
user = <USERNAME>
password = <PASSWORD>
users = <USERS_LIST>
archive_file = <ARCHIVE>.tar.gz
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip3 install psycopg2 configparser
```

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
python3 script.py
```

## üîé –î–µ—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞

- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤.
- –ï—Å–ª–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ —Å—Ö–µ–º—ã (`result/<–Ω–∞–∑–≤–∞–Ω–∏–µ_—Å—Ö–µ–º—ã>/`) –µ—Å—Ç—å `tables_ddl.txt`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å, —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏ —Ç–∞–±–ª–∏—Ü—ã.
- –ü–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π CSV-—Ñ–∞–π–ª–æ–≤ —Å–∫—Ä–∏–ø—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `TRUNCATE` –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü.
- –ï—Å–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç `column_comments.txt`, —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∏—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –∫–æ–ª–æ–Ω–æ–∫.
- –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤—ã–¥–∞—é—Ç—Å—è –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–∞ —Å—Ö–µ–º—ã –∏ —Ç–∞–±–ª–∏—Ü—ã.

## üõ† –û—à–∏–±–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

- –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `config.cfg`.
- –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ CSV, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤ –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (`;`).
- –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ —Å–∫—Ä–∏–ø—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç –æ—à–∏–±–∫—É –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.


